<div>
    <aside id="default-sidebar"
        class="fixed top-0 left-0 z-40 w-72 h-screen transition-transform sm:translate-x-0 shadow-lg z-60"
        aria-label="Sidebar">
        <div class="h-full px-4 py-6 overflow-y-auto bg-[var(--secondary-color)]">
            <!-- Logo and Brand -->
            <div class="flex items-center gap-3 px-2 mb-8">
                <img src="assets/ism.png" alt="Eduvance Logo" class="w-12 h-12 rounded-full bg-white p-1">
                <span class="text-2xl font-bold text-[var(--primary-color)] tracking-wide">ISM</span>
                <div class="h-1 bg-[var(--primary-color)] from-indigo-500 to-purple-600 rounded-full w-24"></div>

            </div> 

            <!-- Navigation Links -->
            <ul class="space-y-2 font-medium">
                <li *ngFor="let link of links">
                    <!-- Main Link -->
                    <div class="relative">
                        <!-- Changed the click handler to pass the event -->
                        <a [href]="!link.sublinks ? link.url : '#'"
                            (click)="link.sublinks ? toggleSubMenu(link, $event) : null"
                            class="flex items-center justify-between p-3 rounded-lg hover:bg-indigo-800 transition-all duration-200 text-[var(--primary-color)] hover:text-white group">
                            <div class="flex items-center">
                                <div
                                    class="w-10 h-10 flex items-center text-white justify-center bg-indigo-800 rounded-full">
                                    <fa-icon [icon]="link.icon"></fa-icon>
                                </div>
                                <span class="ms-4 text-sm font-medium line-clamp-1">{{link.name}}</span>
                            </div>
                            <fa-icon *ngIf="link.sublinks" [icon]="getSubMenuIcon(link)"
                                class="transition-transform duration-200"></fa-icon>
                        </a>

                        <!-- Sublinks with debugging info -->
                        <div *ngIf="link.sublinks" [@subMenuAnimation]="link.isOpen ? 'open' : 'closed'"
                            class="pl-16 mt-1 space-y-1 overflow-hidden">
                            <a *ngFor="let sublink of link.sublinks" [href]="sublink.url"
                                class="block p-2 text-gray-700 rounded-lg hover:bg-indigo-100 transition-all duration-200 line-clamp-1 text-sm">
                                {{sublink.name}}
                            </a>
                        </div>
                    </div>
                </li>
            </ul>

            <!-- Bottom section for profile or logout -->
            <div class="absolute bottom-0 left-0 w-full px-4 py-4">
                <a href="#"
                    class="flex items-center p-2 text-gray-100 rounded-lg bg-indigo-800 transition-all duration-200">
                    <div class="w-8 h-8 flex items-center justify-center bg-indigo-800 rounded-full">
                        <fa-icon [icon]="faSignOut" class="text-white"></fa-icon>
                    </div>
                    <span class="ms-3 text-sm font-medium">DÃ©connexion</span>
                </a>
            </div>
        </div>
    </aside>
</div>