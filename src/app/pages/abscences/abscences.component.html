<section class="mx-auto ml-72 p-6 w-auto">
    <!-- Titre avec design moderne -->
    <div class="mb-8">
        <h2 class="text-3xl font-bold text-[#351F16] mb-2 flex items-center gap-3">
            <i class="fas fa-user-clock text-[#F58613]"></i>
            Liste des absences
        </h2>
        <div class="w-16 h-1 bg-gradient-to-r from-[#F58613] to-[#351F16] rounded-full"></div>
    </div>

    <!-- Container du tableau avec design élégant -->
    <div class="bg-white rounded-2xl shadow-xl border border-[#F58613]/10 overflow-hidden">
        <table class="w-full">
            <thead class="bg-gradient-to-r from-[#F58613] to-orange-600 text-white">
                <tr>
                    <th class="px-4 py-4 text-left font-semibold text-sm uppercase tracking-wider">
                        <i class="fas fa-hashtag mr-2"></i>ID
                    </th>
                    <th class="px-4 py-4 text-left font-semibold text-sm uppercase tracking-wider">
                        <i class="fas fa-file-alt mr-2"></i>Justification
                    </th>
                    <th class="px-4 py-4 text-left font-semibold text-sm uppercase tracking-wider">
                        <i class="fas fa-book mr-2"></i>Cours
                    </th>
                    <th class="px-4 py-4 text-left font-semibold text-sm uppercase tracking-wider">
                        <i class="fas fa-tag mr-2"></i>Type
                    </th>
                    <th class="px-4 py-4 text-left font-semibold text-sm uppercase tracking-wider">
                        <i class="fas fa-info-circle mr-2"></i>Statut Absence
                    </th>
                    <th class="px-4 py-4 text-left font-semibold text-sm uppercase tracking-wider">
                        <i class="fas fa-check-circle mr-2"></i>Statut Justif.
                    </th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-100">
                <tr *ngFor="let abs of abscences" (click)="openJustification(abs.id)"
                    class="hover:bg-gradient-to-r hover:from-[#FFF4E6] hover:to-orange-50 hover:translate-x-1 transition-all duration-300 cursor-pointer group hover:shadow-md">

                    <td class="px-4 py-4 font-mono text-gray-500 text-sm">
                        {{ abs.id }}
                    </td>

                    <td class="px-4 py-4 max-w-xs truncate">
                        <span [class]="abs.idJustification ? '' : 'text-gray-500 italic'">
                            {{ abs.idJustification || 'Aucune' }}
                        </span>
                    </td>

                    <td class="px-4 py-4 font-semibold text-[#351F16]">
                        {{ abs.nomCours }}
                    </td>

                    <td class="px-4 py-4">
                        {{ abs.typeAbscence }}
                    </td>

                    <td class="px-4 py-4">
                        <span [ngClass]="{
                            'bg-blue-100 text-blue-800 border-blue-200': abs.statutAbscence === 'JUSTIFIEE',
                            'bg-gray-100 text-gray-800 border-gray-200': abs.statutAbscence === 'NON_JUSTIFIEE',
                            'bg-yellow-100 text-yellow-800 border-yellow-200': abs.statutAbscence === 'EN_ATTENTE'
                        }"
                            class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wide border">
                            {{ abs.statutAbscence }}
                        </span>
                    </td>

                    <td class="px-4 py-4">
                        <span [ngClass]="{
                            'bg-green-100 text-green-800 border-green-200': abs.statutJustificatif === 'VALIDE',
                            'bg-red-100 text-red-800 border-red-200': abs.statutJustificatif === 'REJETEE',
                            'bg-yellow-100 text-yellow-800 border-yellow-200': abs.statutJustificatif === 'EN_ATTENTE',
                            'bg-gray-100 text-gray-500 border-gray-200': !abs.statutJustificatif
                        }"
                            class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wide border">
                            {{ abs.statutJustificatif || 'N/A' }}
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</section>
<!-- popupTemplate -->
<!-- Modal moderne avec Tailwind -->
<ng-template #popupTemplate>
    <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[80vh] flex flex-col">

        <!-- Header mini -->
        <div class="flex-shrink-0 bg-gradient-to-r from-[#F58613] to-orange-600 text-white px-4 py-3 rounded-t-lg">
            <h2 mat-dialog-title class="text-lg font-bold flex items-center gap-2 m-0">
                <i class="fas fa-file-alt"></i>
                Justification
            </h2>
        </div>

        <!-- Contenu en une seule ligne sur grand écran -->
        <mat-dialog-content class="flex-1 overflow-hidden p-4">
            <div class="grid grid-cols-1 xl:grid-cols-4 gap-4 h-full">

                <!-- Infos rapides -->
                <div class="xl:col-span-1 space-y-3">
                    <div class="bg-[#FFF4E6] p-3 rounded border-l-4 border-[#F58613]">
                        <div class="text-xs text-[#351F16] font-medium uppercase">Élève</div>
                        <div class="text-gray-800 font-semibold">{{ selectedJustificatif?.nomEleve }}</div>
                    </div>

                    <div class="bg-[#FFF4E6] p-3 rounded border-l-4 border-[#F58613]">
                        <div class="text-xs text-[#351F16] font-medium uppercase">Cours</div>
                        <div class="text-gray-800 font-semibold">{{ selectedJustificatif?.nomCours }}</div>
                    </div>

                    <div class="bg-[#FFF4E6] p-3 rounded border-l-4 border-[#F58613]">
                        <div class="text-xs text-[#351F16] font-medium uppercase mb-1">Statut</div>
                        <span [ngClass]="{
                            'bg-green-100 text-green-800': selectedJustificatif?.statutJustification === 'VALIDE',
                            'bg-red-100 text-red-800': selectedJustificatif?.statutJustification === 'REJETEE',
                            'bg-yellow-100 text-yellow-800': selectedJustificatif?.statutJustification === 'EN_ATTENTE'
                        }" class="inline-block px-2 py-1 rounded text-xs font-bold uppercase">
                            {{ selectedJustificatif?.statutJustification }}
                        </span>
                    </div>
                </div>

                <!-- Justificatif étendu -->
                <div class="xl:col-span-3">
                    <div class="bg-[#FFF4E6] p-4 rounded border-l-4 border-[#F58613] h-full">
                        <div class="text-xs text-[#351F16] font-medium uppercase mb-2">Justificatif détaillé</div>
                        <div class="bg-white rounded p-3 border h-[calc(100%-2rem)] overflow-y-auto">
                            <p class="text-gray-700 text-sm leading-relaxed break-words whitespace-pre-wrap m-0">
                                {{ selectedJustificatif?.justificatif }}
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </mat-dialog-content>

        <!-- Actions inline -->
        <mat-dialog-actions class="flex-shrink-0 flex gap-2 justify-end px-4 py-3 bg-gray-50 rounded-b-lg">
            <button mat-button (click)="valider(selectedJustificatif!.id)"
                class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded text-sm font-medium">
                <i class="fas fa-check mr-1"></i>Valider
            </button>
            <button mat-button color="warn" (click)="rejeter(selectedJustificatif!.id)"
                class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded text-sm font-medium">
                <i class="fas fa-times mr-1"></i>Rejeter
            </button>
            <button mat-button mat-dialog-close
                class="bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded text-sm font-medium">
                Fermer
            </button>
        </mat-dialog-actions>
    </div>
</ng-template>